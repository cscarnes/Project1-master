<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Reimbursements</title>
<!-- INCLUDING JQUERY-->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>

<!-- CSS FOR STYLING THE PAGE -->
<style>
table {
	margin: 0 auto;
	font-size: large;
	border: 1px solid black;
}

h1 {
	text-align: center;
	color: #006600;
	font-size: xx-large;
	font-family: 'Gill Sans', 'Gill Sans MT', ' Calibri', 'Trebuchet MS',
		'sans-serif';
}

td {
	background-color: #E4F5D4;
	border: 1px solid black;
}

th, td {
	font-weight: bold;
	border: 1px solid black;
	padding: 10px;
	text-align: center;
}

td {
	font-weight: lighter;
}
</style>
</head>
<body>
  <section>
    <h2 align="left"> Create Reimbursement Request</h2>
    <form action="/reimbursement" method="post">
      <table align="left">
        <tr>
          <td>Enter First Name:</td>
          <td><input type="text" name="name" required="required"
                     placeholder="Enter name here" /></td>
        </tr>
        <tr>
          <td>Enter Last Name:</td>
          <td><input type="text" name="name" required="required"
                     placeholder="Enter name here" /></td>
          </tr>
        <tr>
          <td>Enter Amount:</td>
          <td><input type="text" name="name" required="required"
                     /></td>
        </tr>
        <tr>
        <td>Enter Reason:</td>
          <td><input type="text" name="name" required="required"
                     /></td>
        </tr>
        <tr>
            <td><input type="submit" value="submit"></td>
        </tr>
      </table>
    </form>
  </section>
	<section>
		<h2 align="center">Reimbursment History</h2>
		<table id='table'>
			<tr>
				<th>ID</th>
				<th>First Name</th>
        <th>Last Name</th>
				<th>Reason</th>
				<th>Amount</th>
        <th>Status</th>
				<!-- 				<th>Actions</th> -->
			</tr>
			<script>
				$(document).ready(function() {
					// FETCHING DATA FROM REST API End Point
					$.ajax({
						url : "http://localhost:7000/reimbursement"
					}).then(function(data) {
						var reimbursement = '';

						// ITERATING THROUGH OBJECTS
						$.each(data, function(key, value) {

							//CONSTRUCTION OF ROWS HAVING
							// DATA FROM JSON OBJECT
							reimbursement += '<tr>';
							reimbursement += '<td>' + value.id + '</td>';

							reimbursement += '<td>' + value.first_name + '</td>';

							reimbursement += '<td>' + value.last_name + '</td>';

							reimbursement += '<td>' + value.reason + '</td>';
              
              reimbursement += '<td>' + value.amount + '</td>';
              reimbursement += '<td>' + value.status + '</td>';

							reimbursement += '</tr>';
						});

						//INSERTING ROWS INTO TABLE
						$('#table').append(course);
					});
				});
			</script>
        </table>
			</section>
</body>
</html>